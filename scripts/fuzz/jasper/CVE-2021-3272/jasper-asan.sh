
git clone https://github.com/mdadams/jasper.git SRC

rm -rf ASAN
cp -r SRC ASAN

cd ASAN; git checkout 69a1439a
mkdir obj-asan

export CC=clang; export CXX=clang++

autoreconf -i
cd obj-asan
CFLAGS="-g -fsanitize=address" CXXFLAGS="-g -fsanitize=address" ../configure --disable-shared --prefix=`pwd`; make clean all

# for f in `ls | grep id`; do echo -e "\n${f}" | cut -d ',' -f 1-3 >> 0.txt | timeout 5 /path/to/jasper/REPRODUCE-CVE-2021-3272/ASAN/obj-asan/src/appl/jasper --output /tmp/out.jp2 --input $f 2>&1 | grep SUMMARY | tee -a 0.txt; done

# /path/to/jasper/REPRODUCE-CVE-2021-3272/ASAN/obj-asan/src/appl/jasper --output /tmp/out.jpg --input /path/to/jasper/BadTestcases/jasper-CVE-2021-3272/hoob_8.jp2
